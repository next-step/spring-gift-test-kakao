# 카카오 선물하기 백엔드 프로젝트 분석 보고서

## 1. 프로젝트 개요

카카오 선물하기 서비스의 백엔드 API 서버로, 상품 카탈로그 관리, 위시리스트, 선물하기 기능을 제공한다.

**기술 스택:** Spring Boot 3.5.8, Java 21, H2 Database, JPA

---

## 2. 핵심 기능

### 2.1 카테고리 관리
- 카테고리 생성
- 카테고리 목록 조회

### 2.2 상품 관리
- 상품 생성 (카테고리 연관)
- 상품 목록 조회

### 2.3 상품 옵션 관리
- 옵션 생성 (상품 연관, 재고 수량 포함)
- 옵션 목록 조회
- 재고 차감 (선물하기 시 자동)

### 2.4 위시리스트
- 위시리스트에 상품 추가 (회원-상품 연결)

### 2.5 선물하기
- 선물 전송 (옵션 선택 → 재고 차감 → 배달 처리)
- 메시지 첨부 가능

---

## 3. 도메인 모델 관계

```
Member ◄──── Wish ────► Product ────► Category
                          │
                        Option
                          │
                        Gift (비영속 객체: 보내는 사람, 받는 사람, 옵션, 수량, 메시지)
```

---

## 4. API 엔드포인트 요약

| HTTP 메서드 | 경로 | 설명 |
|------------|------|------|
| POST | `/api/categories` | 카테고리 생성 |
| GET | `/api/categories` | 카테고리 목록 조회 |
| POST | `/api/products` | 상품 생성 |
| GET | `/api/products` | 상품 목록 조회 |
| POST | `/api/gifts` | 선물하기 (Header: `Member-Id`) |

---

## 5. 사용자 행동 시나리오

## 카테고리

### 시나리오 1: 카테고리 생성 및 조회
- **행위:** 관리자가 새 카테고리를 등록한다.
- **입력:** 카테고리 이름
- **기대 결과:** 카테고리가 저장되고 조회된다.

## 상품

### 시나리오 1: 상품 생성 및 조회
- **행위:** 관리자가 특정 카테고리에 상품을 등록한다.
- **입력:** 상품명, 가격, 이미지 URL, 카테고리 ID
- **기대 결과:** 상품이 해당 카테고리에 연결되어 저장되고 조회된다.

### 시나리오 2: 존재하지 않는 카테고리로 상품 생성 시도
- **행위:** 관리자가 존재하지 않는 카테고리 ID로 상품을 등록한다.
- **입력:** 유효하지 않은 카테고리 ID
- **기대 결과:** 예외가 발생한다.


## 선물

### 시나리오 1: 선물하기 (정상)
- **행위:** 회원이 다른 회원에게 상품 옵션을 선택하여 선물한다.
- **입력:** 보내는 사람 ID (Header), 옵션 ID, 수량, 받는 사람 ID, 메시지
- **기대 결과:** 옵션 재고가 차감되고, 선물 배달이 처리된다.

### 시나리오 2: 재고 부족 시 선물하기 시도
- **행위:** 회원이 재고보다 많은 수량을 선물하려 한다.
- **입력:** 재고를 초과하는 수량
- **기대 결과:** `IllegalStateException`이 발생하고, 재고는 변경되지 않는다.

### 시나리오 3: 존재하지 않는 옵션으로 선물하기 시도
- **행위:** 회원이 존재하지 않는 옵션 ID로 선물을 보낸다.
- **입력:** 유효하지 않은 옵션 ID
- **기대 결과:** 예외가 발생한다.

### 시나리오 4: 존재하지 않는 발신자로 선물하기 시도
- **행위:** 존재하지 않는 멤버 ID로 선물을 보낸다.
- **입력:** 유효하지 않은 멤버 ID
- **기대 결과:** 예외가 발생한다.
