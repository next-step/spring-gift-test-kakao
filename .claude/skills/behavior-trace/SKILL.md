---
name: behavior-trace
description: 특정 행동(예: '선물 보내기')을 입력으로 받아 코드 경로(경계→도메인→영속성)와 상태 변화를 추적한다.
disable-model-invocation: true
allowed-tools: Read, Grep, Glob
---

입력: $ARGUMENTS (행동 이름 또는 엔드포인트/기능 키워드)

목표:
- 인수 테스트에서 "무엇을 검증해야 하는지"를 상태 변화 기준으로 뽑아낸다.
- Mock 호출 같은 내부 구현이 아니라, 최종 결과(External behavior)를 중심으로 정리한다.

절차:
1) $ARGUMENTS로 관련 라우트/컨트롤러/핸들러를 찾는다.
2) 호출되는 서비스/유스케이스/도메인 로직을 따라가며,
    - 입력(요청/커맨드)
    - 핵심 규칙(검증/권한/재고/잔액 등)
    - 상태 변경(DB write, event publish, 외부 호출)
    - 실패 케이스(예외 타입/HTTP 코드)
      를 표로 요약한다.
3) 인수 테스트 검증 포인트를 "최종 상태" 기준으로 3~6개 제안한다.

출력 포맷:
- 진입점: ...
- 주요 호출 체인(파일:라인): A -> B -> C
- 상태 변화(쓰기/삭제/외부호출): ...
- 실패 케이스(입력/예외/응답): ...
- 인수 테스트 검증 포인트(최종 상태 기준): ...

