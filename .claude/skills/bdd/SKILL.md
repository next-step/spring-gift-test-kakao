---
name: bdd
description: 이 스킬은 리팩터링 및 기능 개발 시 "외부 행동(External Behavior)"을 보호하도록 강제한다.
---

## 목적
테스트는 내부 구현이 아니라
"외부 행동(External Behavior)"을 보호한다.

리팩터링 시 구조는 바뀔 수 있지만,
행동은 바뀌면 안 된다.


---

## 핵심 원칙

1. 결과를 검증하라.
2. 구현을 검증하지 마라.
3. 사용자 관점에서 테스트하라.
4. 시스템 경계(API)에서 테스트하라.
5. 최종 상태를 기준으로 검증하라.


---

## 무엇을 검증해야 하는가

- HTTP 상태 코드
- 응답 데이터
- 예외 타입
- DB 최종 상태
- 재고, 잔액 등의 실제 수치
- 상태 전이 결과

---

## 무엇을 검증하지 말아야 하는가

- 특정 메서드 호출 여부
- Repository 호출 횟수
- 내부 클래스 구조
- Mock verify 중심 테스트
- private 메서드 동작

---

## 테스트 작성 규칙

- Given / When / Then 구조를 사용한다.
- 하나의 시나리오만 검증한다.
- 의미 있는 테스트 이름을 사용한다.
- 매직 넘버를 피한다.
- 내부 구현 변경에 깨지지 않아야 한다.

---

## 리팩터링 안전 기준

테스트가 통과하면 안전하다.
테스트가 깨지면 행동이 바뀐 것이다.

단위 테스트가 깨져도
인수 테스트가 통과한다면
구현 변경일 가능성이 높다.