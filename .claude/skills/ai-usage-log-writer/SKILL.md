---
name: ai-usage-log-writer
description: >
  AI 도구 활용 내역을 제출 가능한 증적 형태로 AI_USAGE_LOG.md에 정리한다.
  프롬프트, 접근법, 결과, 채택/기각 이유를 구조화하여 기록하며
  세션 단위로 관리한다.
argument-hint: "[세션 주제, e.g. E2E 테스트 작성]"
allowed-tools: Read, Edit, Write, Grep, Glob
---

# ai-usage-log-writer

AI 도구 활용 내역을 제출 가능한 증적 형태로 정리한다.

## 역할
- 프롬프트, 접근법, 결과, 채택/기각 이유를 `AI_USAGE_LOG.md`로 문서화한다.
- 과제 제출 관점에서 재현성과 검증력을 남긴다.

## 입력 계약
- 대화 로그, 실행 결과, 커밋 메시지, 메모 중 실제로 확인 가능한 정보만 사용한다.
- 근거가 없거나 불확실한 항목은 추정하지 않고 `TODO(근거 필요)`로 표기한다.

## 보안 규칙
- 프롬프트 원문을 기록하되 민감정보는 반드시 마스킹한다.
- 마스킹 대상:
  - 토큰/키/비밀번호/시크릿
  - 이메일, 전화번호, 주민번호 등 개인식별정보
  - 내부 URL, 사설 IP, DB 접속문자열
- 마스킹 표기: `<REDACTED:TYPE>`

## 실행 방법
1. 세션 범위와 목적을 정한다.
2. 사용된 프롬프트와 접근법을 근거와 함께 수집한다.
3. 각 시도의 기대 결과와 실제 결과를 비교한다.
4. 판단(채택/기각/보류)과 이유를 아래 기준으로 기록한다:
   - 재현성
   - 유지보수성
   - 커버리지/검증력
   - 비용(시간, 복잡도)
5. `AI_USAGE_LOG.md`에 누적 기록한다.

## 파일 기록 정책
- 파일이 없으면 생성한다.
- 세션 헤더 형식: `## SessionID: ${CLAUDE_SESSION_ID}`

### 세션 판별 및 동작 규칙
1. `AI_USAGE_LOG.md`를 읽고 `## SessionID:` 헤더들을 확인한다.
2. 현재 `${CLAUDE_SESSION_ID}`와 일치하는 세션 블록이 있는지 검사한다.

| 상황 | 동작 |
|------|------|
| 파일 없음 | 새 파일 생성 + 새 세션 블록 작성 |
| 일치하는 세션 블록 있음 | **기존 블록을 Edit으로 수정** (아래 규칙 적용) |
| 일치하는 세션 블록 없음 | 파일 끝에 새 세션 블록 append |

### 기존 세션 수정 시 규칙
- **프롬프트 테이블**: 기존 행 유지 + 새 행 추가 (ID 이어서 채번)
- **접근법 테이블**: 기존 행 유지 + 새 행 추가
- **생성/수정된 산출물**: 기존 행 유지 + 새 행 추가
- **세션 정보**: 범위가 확장되었으면 갱신
- **최종 가이드 · TODO**: 최신 상태로 덮어쓰기

## 출력 형식

```markdown
# AI_USAGE_LOG

## SessionID: ${CLAUDE_SESSION_ID}

### 세션 정보
- 목적: [예: API 5개 E2E 작성 및 리팩토링]
- 범위: [예: Category/Product/Gift API]
- 근거 소스: [대화 링크/커밋/테스트 결과]

### 프롬프트 및 결과
| ID | 목적 | 프롬프트 원문(마스킹) | 기대 결과 | 실제 결과 | 판단(채택/기각/보류) | 이유(재현성/유지보수성/검증력/비용) | 근거 |
|----|------|------------------------|-----------|-----------|----------------------|--------------------------------------|------|
| A1 | [목적] | [원문] | [기대] | [실제] | [판단] | [이유] | [근거] |

### 접근법 요약
| 접근법 | 적용 범위 | 결과 | 유지 여부 | 메모 |
|--------|-----------|------|-----------|------|
| [방법] | [범위] | [성공/실패] | [유지/폐기] | [메모] |

### 최종 가이드
- 재사용 프롬프트:
  - [프롬프트 1]
- 주의점:
  - [실패 패턴 1]
- 다음 세션 TODO:
  - [TODO]
```

## 품질 체크리스트
- 모든 레코드에 근거가 있는가?
- 추정성 문장을 제거했는가?
- 민감정보 마스킹을 완료했는가?
- 채택/기각 기준이 테스트 품질 관점으로 설명되었는가?

## 사용 예시

```text
/ai-usage-log-writer
```

```text
/ai-usage-log-writer E2E 테스트 작성
```
